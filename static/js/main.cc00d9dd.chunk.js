(this["webpackJsonpreact-gh-test3"]=this["webpackJsonpreact-gh-test3"]||[]).push([[0],{213:function(e,n,t){},214:function(e,n,t){},239:function(e,n){},243:function(e,n){},245:function(e,n){},254:function(e,n){},256:function(e,n){},281:function(e,n){},283:function(e,n){},284:function(e,n){},289:function(e,n){},291:function(e,n){},297:function(e,n){},299:function(e,n){},318:function(e,n){},330:function(e,n){},333:function(e,n){},337:function(e,n,t){},343:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),c=t(12),r=t.n(c),i=(t(213),t(65)),l=t(196),s=t(85),u=t(28),d=(t.p,t(214),t(215),t(218),t(386)),p=t(115),b=t(379),j=t(187),h=t(392),m=t(387),f=t(388),v=t(389),g=t(393),C=t(384),O=t(385),x=t(4),w=t(380),y=t(383),N=t(394),P=t(390),k=t(378),S=t(195),I=t.n(S),R=t(194),E=t.n(R),F=t(89),T=(t(337),t(5)),A=Object(x.a)({switchBase:{color:F.a[50],"&$checked":{color:F.a[900]},"&$checked + $track":{backgroundColor:F.a[900]}},checked:{},track:{}})(g.a),U=Object(b.a)((function(e){return{paperRoot:{width:"100%",height:"100%",backgroundColor:"#343a42",borderColor:"gray"}}}));function D(e){var n=e.id,t=e.whatPrinciples,a=e.onChange,c=e.startTags,r=e.hasStartContent,i=U(),l=o.a.useState(r),d=Object(u.a)(l,2),b=d[0],j=d[1],h=o.a.useState(c.map((function(e,n){return{id:n,tagName:e}}))),m=Object(u.a)(h,2),f=m[0],v=m[1],g=o.a.useState(c.length+5),x=Object(u.a)(g,2),S=x[0],R=x[1],F=o.a.useRef(null);function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(""!==n)return!0;var t,a=Object(s.a)(f);try{for(a.s();!(t=a.n()).done;){var o=t.value;if(o.id!==e&&""!==o.tagName)return!0}}catch(c){a.e(c)}finally{a.f()}return""!==n}var L=function(e){return function(n){var t=n.target.value.replace(/^\s*/,"");v(f.map((function(n){return{id:n.id,tagName:n.id===e?t:n.tagName}}))),j(D(e,t))}},B=function(){R(S+1),f.push({id:S,tagName:""}),v(f)},$=function(e){return function(){v(f.filter((function(n){return n.id!=e}))),j(D(e))}},J=function(e){var n=e.key;"Enter"!==n&&","!==n||(e.preventDefault(),B()),"Escape"===n&&document.activeElement.blur()};return o.a.useEffect((function(){a({id:n,content:b,contentTags:f.map((function(e){return e.tagName})).filter((function(e){return""!=e}))})}),[f,b]),Object(T.jsx)("div",{className:"response-box",children:Object(T.jsxs)(w.a,{className:i.paperRoot,elevation:3,children:[Object(T.jsx)("div",{className:"id-container",children:Object(T.jsxs)(p.a,{display:"inline",children:["ID: ",n]})}),Object(T.jsx)("div",{className:"explanation-container",children:Object(T.jsx)(p.a,{display:"block",children:t})}),Object(T.jsxs)("div",{className:"coding-container",children:[Object(T.jsxs)("div",{className:"content-codes-container",children:[f.map((function(e){return Object(T.jsx)("div",{className:"tag-container",ref:F,children:Object(T.jsx)(P.a,{autoFocus:!0,placeholder:"Content code",onKeyPress:J,value:e.tagName,onChange:L(e.id),ref:F,InputProps:{endAdornment:Object(T.jsx)(y.a,{position:"end",children:Object(T.jsx)(N.a,{title:"Remove",children:Object(T.jsx)(k.a,{"aria-label":"toggle password visibility",onClick:$(e.id),size:"small",children:Object(T.jsx)(E.a,{})})})})}})})})),Object(T.jsx)(N.a,{title:"Add tag",children:Object(T.jsx)(k.a,{onClick:B,children:Object(T.jsx)(I.a,{})})})]}),Object(T.jsx)("div",{className:"has-content-container",children:Object(T.jsx)(C.a,{children:Object(T.jsx)(N.a,{title:"Enabled if one or more non-empty content codes are listed.",children:Object(T.jsx)(O.a,{control:Object(T.jsx)(A,{checked:b,onChange:function(e){}}),label:"Content?",labelPlacement:"top"})})})})]})]})})}function L(e){var n=e.uploaderSettings,t=n.startRow,a=n.idColumn,o=n.usePrincipColumn,c=n.whatColumn,r=n.anyContentColumn,i=n.numFactorsColumn,l=n.contentCodedColumn,s=n.alphEachResponseColumn,u=e.onChange;return Object(T.jsxs)("div",{children:[Object(T.jsx)(P.a,{type:"number",label:"Starting row #",value:t,onChange:function(e){return u({startRow:parseInt(e.target.value)})},inputProps:{min:0}}),Object(T.jsx)(P.a,{type:"number",label:"'ID' column #",value:a,onChange:function(e){return u({idColumn:parseInt(e.target.value)})},inputProps:{min:0}}),Object(T.jsx)(P.a,{type:"number",label:"'Use.Princip' column #",value:o,onChange:function(e){return u({usePrincipColumn:parseInt(e.target.value)})},inputProps:{min:0}}),Object(T.jsx)(P.a,{type:"number",label:"'What?'column #",value:c,onChange:function(e){return u({whatColumn:parseInt(e.target.value)})},inputProps:{min:0}}),Object(T.jsx)(P.a,{type:"number",label:"'AnyContent?'column #",value:r,onChange:function(e){return u({anyContentColumn:parseInt(e.target.value)})},inputProps:{min:0}}),Object(T.jsx)(P.a,{type:"number",label:"'# Factors'column #",value:i,onChange:function(e){return u({numFactorsColumn:parseInt(e.target.value)})},inputProps:{min:0}}),Object(T.jsx)(P.a,{type:"number",label:"'Content Coded'column #",value:l,onChange:function(e){return u({contentCodedColumn:parseInt(e.target.value)})},inputProps:{min:0}}),Object(T.jsx)(P.a,{type:"number",label:"'ALPH.EachResp.'column #",value:s,onChange:function(e){return u({alphEachResponseColumn:parseInt(e.target.value)})},inputProps:{min:0}})]})}var B=Object(b.a)((function(e){return{input:{display:"none"},headerText:{color:"#bbbbbb"},paperRoot:{backgroundColor:"red"}}}));var $=function(){var e={startRow:parseInt("2"),idColumn:parseInt("0"),usePrincipColumn:parseInt("2"),whatColumn:parseInt("3"),anyContentColumn:parseInt("4"),numFactorsColumn:parseInt("5"),contentCodedColumn:parseInt("6"),alphEachResponseColumn:parseInt("9")},n=B(),t=o.a.useState([{id:0,usePrincip:"No",whatPrincip:"Meh"}]),a=Object(u.a)(t,2),c=a[0],r=a[1],b=o.a.useState(null),g=Object(u.a)(b,2),C=g[0],O=g[1],x=o.a.useState({}),w=Object(u.a)(x,2),y=w[0],N=w[1],P=o.a.useState("None--Press the upload button to upload a .xlsx file."),k=Object(u.a)(P,2),S=k[0],I=k[1],R=o.a.useState(!1),E=Object(u.a)(R,2),F=E[0],A=E[1],U=o.a.useState(e),$=Object(u.a)(U,2),J=$[0],M=$[1],Y=o.a.useState(e),z=Object(u.a)(Y,2),H=z[0],K=z[1];function W(e,n,t){var a=(n+10).toString(36).toUpperCase();console.log(a);var o=a+(t+1);return console.log(o),e.cell(t+1,n+1)}function _(e,n,t){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=a;;){var c=W(e,n,o);if(!c)return-1;if(o>500)return console.log("Encountered an infinite loop!"),-1;if(c.value()===t)return o;o++}}function q(e){for(var n="",t=0;t<e.length;t++)n+=e[t],t!=e.length-1&&(n+=", ");return n}var G=function(){r([])};return Object(T.jsxs)("div",{className:!0,children:[Object(T.jsxs)("div",{className:"top-bar sticky",children:[Object(T.jsxs)("div",{className:"file-manager",children:[Object(T.jsx)("input",{type:"file",accept:".xlsx",className:n.input,id:"contained-button-file",onChange:function(e){if(0!==e.target.files.length){var n=e.target.files[0];j.fromDataAsync(n).then((function(n){I(e.target.value.split("\\").pop()),G(),O(n);var t=n.sheet("DAT"),a=function(e,n){for(var t=n.startRow,a=n.idColumn,o=n.usePrincipColumn,c=n.whatColumn,r=n.numFactorsColumn,i=n.contentCodedColumn,l=[],s=0;;){var u=W(e,o,t+s);if(!u||"Yes"!==u.value()&&"No"!==u.value())break;var d=W(e,a,t+s),p=W(e,c,t+s),b=W(e,r,t+s),j=W(e,i,t+s),h=[];j&&j.value()&&(console.log(j.value()),h=j.value().toString().split(", ").filter((function(e){return""!==e.trim()})));var m={id:d.value(),usePrincip:u.value(),whatPrincip:p.value(),numFactors:b.value()?b.value():0,tags:h};l.push(m),s++}return l}(t,J);r(a),function(e,n){for(var t=0;;){var a=W(e,n.c+2,n.r+t);if(!a||"Yes"!==a.value()&&"No"!==a.value())break;W(e,J.anyContentColumn,n.r+t).value(0),W(e,J.numFactorsColumn,n.r+t).value(0),W(e,J.alphEachResponseColumn,n.r+t).value(""),t++}}(t,{c:0,r:2});var o,c={},i=Object(s.a)(a);try{for(i.s();!(o=i.n()).done;){var l=o.value;c[l.id]={id:l.id,content:0!==l.tags.length,contentTags:l.tags}}}catch(u){i.e(u)}finally{i.f()}N(c),e.target.value=null}))}}}),Object(T.jsx)("label",{htmlFor:"contained-button-file",children:Object(T.jsx)(d.a,{variant:"contained",component:"span",children:"Upload spreadsheet"})}),Object(T.jsx)(d.a,{onClick:function(){return A(!0)},children:"(Uploader settings)"}),Object(T.jsxs)(h.a,{open:F,"aria-labelledby":"settings-dialog-title",children:[Object(T.jsx)(m.a,{id:"settings-dialog-title",children:"Uploader settings"}),Object(T.jsx)(f.a,{children:Object(T.jsx)(L,{uploaderSettings:H,onChange:function(e){K(Object(i.a)(Object(i.a)({},H),e))}})}),Object(T.jsxs)(v.a,{children:[Object(T.jsx)(d.a,{onClick:function(){A(!1),K(Object(i.a)({},J))},children:"Cancel"}),Object(T.jsx)(d.a,{onClick:function(){A(!1),M(Object(i.a)(Object(i.a)({},J),H))},children:"Apply"})]})]}),Object(T.jsxs)(p.a,{className:n.headerText,children:["Now scoring: ",S]})]}),Object(T.jsx)("div",{className:"download-interface",children:Object(T.jsx)(d.a,{variant:"contained",onClick:function(){if(console.log("Submitting scoring using new function!"),C){for(var e=C.sheet("DAT"),n=[],t=0,a=Object.values(y);t<a.length;t++){var o=a[t],c=_(e,J.idColumn,o.id,2);-1!==c&&(W(e,J.anyContentColumn,c).value(o.content?1:0),W(e,J.numFactorsColumn,c).value(o.contentTags.length),W(e,J.contentCodedColumn,c).value(q(o.contentTags)),n.push.apply(n,Object(l.a)(o.contentTags)))}!function(e,n,t){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=0;o<t.length;o++)W(e,n,a+o).value(t[o])}(e,J.alphEachResponseColumn,n.sort(),2),function(e,n){e.outputAsync().then((function(e){if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(e,"populate-out.xlsx");else{var t=window.URL.createObjectURL(e),a=document.createElement("a");document.body.appendChild(a),a.href=t,a.download=n+".xlsx",a.click(),window.URL.revokeObjectURL(t),document.body.removeChild(a)}}))}(C,"newlib_output")}else console.log("No workbook!")},children:"Download spreadsheet"})})]}),Object(T.jsx)("div",{className:"response-container-container",children:c.map((function(e){return"No"!==e.usePrincip&&""!==e.whatPrincip&&e.whatPrincip?Object(T.jsx)("div",{className:"response-container",children:Object(T.jsx)(D,{id:e.id,whatPrinciples:e.whatPrincip,onChange:(n=e.id,function(e){y[n]=e,N(y)}),startTags:e.tags,hasStartContent:0!==e.tags.length})}):null;var n}))})]})},J=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,395)).then((function(n){var t=n.getCLS,a=n.getFID,o=n.getFCP,c=n.getLCP,r=n.getTTFB;t(e),a(e),o(e),c(e),r(e)}))};r.a.render(Object(T.jsx)(o.a.StrictMode,{children:Object(T.jsx)($,{})}),document.getElementById("root")),J()}},[[343,1,2]]]);
//# sourceMappingURL=main.cc00d9dd.chunk.js.map